param (
  
    [Parameter(Mandatory=$false)]
    [String] $rg = "tragedy",
	[String] $location = "West US",
    [String] $backendPoolName = "backendpool1",
    [String] $vmnic1 = "vmtestscriptdelet54"

)


{
    "Logging in to Azure..."
    Connect-AzAccount -Identity
}
catch {
    Write-Error -Message $_.Exception
    throw $_.Exception
}

$mylb = Get-AzLoadBalancer -Name $lbname -ResourceGroupName $rg
$bep = Get-AzLoadBalancerBackendAddressPoolConfig -Name $backendPoolName -LoadBalancer $mylb
$nic1 = Get-AzNetworkInterface -ResourceGroupName $rg -Name $vmnic1
$nic1.IpConfigurations[0].LoadBalancerBackendAddressPools = $bep
$nic1 | Set-AzNetworkInterface